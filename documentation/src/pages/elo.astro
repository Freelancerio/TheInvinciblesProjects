---
layout: '../layouts/Layout.astro'
title: 'Elo and Predictive Models Overview'
description: 'Comprehensive documentation for our Elo-like strength, match prediction, and standings prediction systems.'
---

<!-- ───────────────────────────────────────────── -->
<!-- Section 1: Team Strength Calculation          -->
<!-- ───────────────────────────────────────────── -->

<section class="not-prose mb-6 px-6 max-w-4xl mx-auto">
  <h1 class="text-3xl font-bold tracking-tight">Team Strength Calculation</h1>
  <p class="mt-2 text-slate-600 dark:text-slate-300">
    The <strong>TeamStrengthService</strong> computes per-team performance across
    Attack, Midfield, Defense, and Squad Strength dimensions using normalized match data.
  </p>
</section>

<div class="prose prose-slate dark:prose-invert px-6 max-w-4xl mx-auto">
  <h2>1. Data Aggregation</h2>
  <p>All <code>MatchStatistics</code> are grouped by team and averaged over all matches played.</p>

  <h2>2. Attack Strength</h2>
  <pre><code>Attack = 0.4 &times; Avg(Shots on Goal) + 0.6 &times; Avg(Expected Goals)</code></pre>

  <h2>3. Midfield Strength</h2>
  <pre><code>Midfield = 0.5 &times; Pass Accuracy + 0.3 &times; Ball Possession + 0.2 &times; Normalized Passes</code></pre>

  <h2>4. Defense Strength</h2>
  <pre><code>Defense = 0.5 &times; (Saves/Max Saves &times; 100)
        + 0.3 &times; (Goals Prevented/Max Goals Prevented &times; 100)
        − 0.2 &times; Goals Conceded</code></pre>

  <h2>5. Squad Strength (Overall)</h2>
  <pre><code>Squad = 0.4 &times; Attack + 0.3 &times; Midfield + 0.3 &times; Defense</code></pre>

  <h2>6. Persistence</h2>
  <p>
    The service saves all computed strengths to the database,
    updating existing records when available.
  </p>
</div>

<hr class="my-16 border-slate-300 dark:border-slate-700"/>

<!-- ───────────────────────────────────────────── -->
<!-- Section 2: Prediction Service (Poisson Model) -->
<!-- ───────────────────────────────────────────── -->

<section class="not-prose mb-6 px-6 max-w-4xl mx-auto">
  <h1 class="text-3xl font-bold tracking-tight">Match Prediction & Odds Calculation</h1>
  <p class="mt-2 text-slate-600 dark:text-slate-300">
    The <strong>PredictionService</strong> predicts match outcomes using a Poisson-based expected
    goals model incorporating seasonal performance, form, and head-to-head data.
  </p>
</section>

<div class="prose prose-slate dark:prose-invert px-6 max-w-4xl mx-auto">
  <h2>1. Expected Goals (&lambda;)</h2>
  <pre><code>&lambda;_home = 0.4&times;AvgGoalsScored(home) + 0.3&times;AvgGoalsConceded(away)
        + 0.2&times;AvgH2HGoals(home) + 0.1&times;FormScore(home)

&lambda;_away = 0.4&times;AvgGoalsScored(away) + 0.3&times;AvgGoalsConceded(home)
        + 0.2&times;AvgH2HGoals(away) + 0.1&times;FormScore(away)</code></pre>

  <h2>2. Possession Adjustment</h2>
  <pre><code>possessionFactor = (HomePossession - AwayPossession) / 100
&lambda;_home *= (1 + possessionFactor)
&lambda;_away *= (1 - possessionFactor)</code></pre>

  <h2>3. Poisson Distribution</h2>
  <p>
    The Poisson distribution models the likelihood of scoring <em>k</em> goals given &lambda;:
  </p>
  <pre><code>P(X=k) = (e^(-&lambda;) &times; &lambda;^k) / k!</code></pre>

  <h2>4. Outcome Probabilities</h2>
  <ul>
    <li><strong>Home Win:</strong> &Sigma; P(i>j)</li>
    <li><strong>Draw:</strong> &Sigma; P(i=j)</li>
    <li><strong>Away Win:</strong> &Sigma; P(i<j)</li>
  </ul>

  <h2>5. Normalization</h2>
  <pre><code>total = homeWin + draw + awayWin
homeWin /= total
draw /= total
awayWin /= total</code></pre>

  <h2>6. Outputs</h2>
  <p>
    Returns both:
  </p>
  <ul>
    <li><code>MatchPredictionDTO</code> - most likely score and expected &lambda; values</li>
    <li><code>MatchOdds</code> - probability of Home/Draw/Away outcomes</li>
  </ul>
</div>

<hr class="my-16 border-slate-300 dark:border-slate-700"/>

<!-- ───────────────────────────────────────────── -->
<!-- Section 3: Standings Prediction Service       -->
<!-- ───────────────────────────────────────────── -->

<section class="not-prose mb-6 px-6 max-w-4xl mx-auto">
  <h1 class="text-3xl font-bold tracking-tight">Standings Prediction Calculation</h1>
  <p class="mt-2 text-slate-600 dark:text-slate-300">
    The <strong>StandingsPredictionService</strong> predicts league table outcomes
    by combining historical standings and current season metrics using weighted tags.
  </p>
</section>

<div class="prose prose-slate dark:prose-invert px-6 max-w-4xl mx-auto">
  <h2>1. Input</h2>
  <ul>
    <li><strong>season</strong>: Current prediction year.</li>
    <li><strong>tags</strong>: Set of performance factors to include (e.g., <code>goalDifferenceCurrent</code>).</li>
  </ul>

  <h2>2. Components and Weights</h2>
  <table>
    <thead>
      <tr><th>Category</th><th>Tag</th><th>Weight</th></tr>
    </thead>
    <tbody>
      <tr><td>Previous Points</td><td>previousPoints2024 / previousPoints2023</td><td>0.6 / 0.4</td></tr>
      <tr><td>Goal Difference</td><td>goalDifference2024 / goalDifference2023 / goalDifferenceCurrent</td><td>0.5 / 0.3 / 0.7</td></tr>
      <tr><td>League Position</td><td>leaguePosition2024 / leaguePosition2023</td><td>(21 - rank) &times; 0.5</td></tr>
      <tr><td>Goals For/Against</td><td>goalsForCurrent / goalsAgainstCurrent</td><td>+0.2 &divide -0.2</td></tr>
    </tbody>
  </table>

  <h2>3. Aggregation</h2>
  <pre><code>Predicted Score =
(Points_2024&times;0.6) + (Points_2023&times;0.4)
+ (GoalDiff_2024&times;0.5) + (GoalDiff_2023&times;0.3) + (GoalDiff_Current&times;0.7)
+ PositionWeight(2024) + PositionWeight(2023)
+ (GoalsFor&times;0.2) − (GoalsAgainst&times;0.2)</code></pre>

  <h2>4. Ranking</h2>
  <p>
    Teams are sorted by descending predicted score and ranked from 1 to N.
  </p>

  <h2>5. Output</h2>
  <ul>
    <li>Team Name and Logo</li>
    <li>Predicted Score</li>
    <li>Predicted Rank</li>
  </ul>

  <p>
    Returned as a list of <code>PredictedStandingDTO</code> objects.
  </p>
</div>
