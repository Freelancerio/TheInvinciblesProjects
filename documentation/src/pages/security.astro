---
layout: '../layouts/Layout.astro'
title: 'Security Report â€“ Supply Chain Attacks & Vulnerabilities'
description: 'Overview of supply chain attacks, Snyk scan findings, and protective measures for SmartBet.'
---

<section class="not-prose mb-6 px-6 max-w-4xl mx-auto">
  <h1 class="text-3xl font-bold tracking-tight">Security Report</h1>
  <p class="mt-2 text-slate-600 dark:text-slate-300">
    This document summarizes recent supply chain attacks on npm, our own Snyk security scan results,
    and the mitigation strategies we are applying to protect the SmartBet project.
  </p>
</section>

<div class="prose prose-slate dark:prose-invert px-6 max-w-4xl mx-auto">

  <h2>Supply Chain Attacks on npm</h2>

  <h3>1. <code>debug</code> &amp; <code>chalk</code> Attack (Aikido report)</h3>
  <ul>
    <li><strong>Point of failure:</strong> npm account compromise.</li>
    <li>Attackers gained access to maintainer accounts and published trojanized versions.</li>
    <li>Malicious code exfiltrated secrets (env variables, shell history) to an external server.</li>
    <li>Because these packages were trusted, many developers unknowingly installed the infected versions.</li>
  </ul>

  <h4 class="mt-6">Full list of compromised versions &amp; related packages</h4>
  <p class="mt-2"><em>Attack discovered:</em> September 8, 2025</p>

  <p class="mb-2"><strong>Compromised versions:</strong></p>
  <ul>
    <li><code>debug@4.3.5</code></li>
    <li><code>chalk@5.3.0</code></li>
  </ul>

  <p class="mt-4 mb-2">
    <strong>Additional affected dependency packages:</strong>  
    According to Aikido's analysis, the attacker released trojanized updates across 18 related packages 
    to spread the malware through dependency chains. These included:
  </p>

  <div class="overflow-x-auto not-prose">
    <table class="w-full text-left border-collapse">
      <thead>
        <tr>
          <th class="border-b py-2 px-3">Package</th>
          <th class="border-b py-2 px-3">Latest Known Compromised Version</th>
        </tr>
      </thead>
      <tbody>
        <tr><td class="border-b py-2 px-3">backslash</td><td class="border-b py-2 px-3">0.0.9</td></tr>
        <tr><td class="border-b py-2 px-3">chalk-template</td><td class="border-b py-2 px-3">0.5.0</td></tr>
        <tr><td class="border-b py-2 px-3">supports-hyperlinks</td><td class="border-b py-2 px-3">3.0.1</td></tr>
        <tr><td class="border-b py-2 px-3">has-ansi</td><td class="border-b py-2 px-3">4.0.1</td></tr>
        <tr><td class="border-b py-2 px-3">simple-swizzle</td><td class="border-b py-2 px-3">0.2.5</td></tr>
        <tr><td class="border-b py-2 px-3">color-string</td><td class="border-b py-2 px-3">1.9.2</td></tr>
        <tr><td class="border-b py-2 px-3">error-ex</td><td class="border-b py-2 px-3">1.3.2</td></tr>
        <tr><td class="border-b py-2 px-3">color-name</td><td class="border-b py-2 px-3">1.1.5</td></tr>
        <tr><td class="border-b py-2 px-3">is-arrayish</td><td class="border-b py-2 px-3">0.3.3</td></tr>
        <tr><td class="border-b py-2 px-3">slice-ansi</td><td class="border-b py-2 px-3">5.0.0</td></tr>
        <tr><td class="border-b py-2 px-3">color-convert</td><td class="border-b py-2 px-3">3.3.0</td></tr>
        <tr><td class="border-b py-2 px-3">wrap-ansi</td><td class="border-b py-2 px-3">8.1.0</td></tr>
        <tr><td class="border-b py-2 px-3">ansi-regex</td><td class="border-b py-2 px-3">6.1.0</td></tr>
        <tr><td class="border-b py-2 px-3">supports-color</td><td class="border-b py-2 px-3">9.0.0</td></tr>
        <tr><td class="border-b py-2 px-3">strip-ansi</td><td class="border-b py-2 px-3">8.1.0</td></tr>
        <tr><td class="border-b py-2 px-3">chalk</td><td class="border-b py-2 px-3">5.3.0</td></tr>
        <tr><td class="border-b py-2 px-3">debug</td><td class="border-b py-2 px-3">4.3.5</td></tr>
        <tr><td class="border-b py-2 px-3">ansi-styles</td><td class="border-b py-2 px-3">6.2.1</td></tr>
      </tbody>
    </table>
  </div>

  <h3>2. <code>@ctrl/tinycolor</code> Attack (Socket report)</h3>
  <ul>
    <li><strong>Point of failure:</strong> maintainer account takeover.</li>
    <li>Malicious script (<code>bundle.js</code>) injected into the package.</li>
    <li>Payload downloaded TruffleHog, scanned environments &amp; repos for secrets, and exfiltrated via Discord webhook.</li>
    <li>Created a worm-like propagation, infecting hundreds of downstream packages.</li>
  </ul>

  <p><strong>Summary:</strong> Both attacks originated from compromised maintainer accounts.  
  The <code>debug</code>/<code>chalk</code> case leaked secrets directly; the <code>tinycolor</code> case spread aggressively, infecting many dependencies.</p>

  <h2>Snyk Security Scan Report (Frontend)</h2>
  <p>We ran a Snyk CLI scan on our <code>package-lock.json</code>, testing 1,316 dependencies.  
  Six vulnerabilities were found, all inherited via <code>create-react-app</code> (<code>react-scripts</code>):</p>

  <ol>
    <li><strong>inflight@1.0.6</strong> - Missing release of resource after effective lifetime (Medium, no fix available).</li>
    <li><strong>nth-check@1.0.2</strong> - ReDoS (High, fix in 2.0.1).</li>
    <li><strong>postcss@7.0.39</strong> - Improper input validation (Medium, fix in 8.4.31).</li>
    <li><strong>serialize-javascript@4.0.0</strong> - XSS (Medium, fix in 6.0.2).</li>
    <li><strong>webpack-dev-server@4.15.2</strong> - Origin validation error (High, fix in 5.2.1).</li>
    <li><strong>webpack-dev-server@4.15.2</strong> - Exposed dangerous method (Medium, fix in 5.2.1).</li>
  </ol>

  <h3>Limitations with Fixes</h3>
  <ul>
    <li>Dependencies are nested inside CRA and cannot be upgraded directly.</li>
    <li><strong>Short-term:</strong> apply npm overrides for <code>nth-check</code> and <code>serialize-javascript</code>.</li>
    <li><strong>Long-term:</strong> migrate away from CRA to modern tools (e.g. Vite, Next.js).</li>
  </ul>

  <h2>Protecting Against Supply Chain Attacks (Upstream)</h2>
  <ul>
    <li>Pin exact versions in lockfiles (<code>package-lock.json</code>).</li>
    <li>Run regular scans (npm audit, Snyk, Socket.dev, Dependabot).</li>
    <li>Limit number of external libraries; only use reputable, actively maintained ones.</li>
    <li>Beware of typosquatting; review changelogs before updating.</li>
    <li>Use private registries or mirrors to host vetted packages.</li>
    <li>Regular updates and monitoring reduce attack surface.</li>
  </ul>

  <h2>Protecting Our Own Product (Source-Level Security)</h2>
  <ul>
    <li>Enforce MFA on developer accounts.</li>
    <li>Strict code review on all contributions.</li>
    <li>Secure CI/CD with least privilege, signed commits, protected branches.</li>
    <li>Verify published packages with provenance or signing.</li>
    <li>Deploy runtime monitoring to detect abnormal behavior.</li>
    <li>Developer training and awareness to prevent mistakes.</li>
  </ul>

  <h2>Summary</h2>
  <ul>
    <li>Our frontend is <strong>not affected</strong> by the recent npm malware (debug, chalk, tinycolor).</li>
    <li>Snyk scan found 6 inherited vulnerabilities via CRA.</li>
    <li><strong>Immediate:</strong> patch <code>nth-check</code> and <code>serialize-javascript</code> with overrides.</li>
    <li><strong>Long-term:</strong> migrate from CRA to Vite or similar to remove outdated dependencies.</li>
  </ul>

  <!-- NEW SUMMARY TABLE -->
  <h3 class="mt-6">Attack Summary Overview</h3>
  <div class="overflow-x-auto not-prose">
    <table class="w-full text-left border-collapse">
      <thead>
        <tr>
          <th class="border-b py-2 px-3">Attack</th>
          <th class="border-b py-2 px-3">Primary Packages</th>
          <th class="border-b py-2 px-3">Compromised Versions</th>
          <th class="border-b py-2 px-3">Nature of Attack</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="border-b py-2 px-3"><strong>debug &amp; chalk attack</strong></td>
          <td class="border-b py-2 px-3"><code>debug</code>, <code>chalk</code>, + 16 dependencies (see above)</td>
          <td class="border-b py-2 px-3"><code>debug@4.3.5</code>, <code>chalk@5.3.0</code></td>
          <td class="border-b py-2 px-3">Browser-injected malware stealing crypto transactions</td>
        </tr>
        <tr>
          <td class="py-2 px-3"><strong>tinycolor worm attack</strong></td>
          <td class="py-2 px-3"><code>@ctrl/tinycolor</code> + ~500 dependent packages</td>
          <td class="py-2 px-3"><code>@ctrl/tinycolor@3.6.1</code></td>
          <td class="py-2 px-3">Worm-like self-replication, secret exfiltration via TruffleHog &amp; Discord</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
