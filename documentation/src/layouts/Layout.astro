---
import '../styles/global.css';

const {
  title = 'The Invincibles Docs',
  description = 'Design • Implementation • Testing • Deployment',
} = Astro.props;
---

<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <link rel="icon" href="/favicon.svg" />
  </head>

  <body class="min-h-screen bg-gradient-to-b from-slate-50 to-white text-slate-800 antialiased dark:from-slate-950 dark:to-slate-900 dark:text-slate-200">
    <!-- Skip link -->
    <a
      href="#content"
      class="sr-only focus:not-sr-only focus:fixed focus:top-3 focus:left-3 z-50 rounded-md bg-indigo-600 px-3 py-2 text-sm text-white"
    >Skip to content</a>

    <!-- Header / Nav -->
    <header class="sticky top-0 z-50 border-b border-slate-200/70 bg-white/75 backdrop-blur-lg dark:border-slate-800 dark:bg-slate-900/60">
      <nav class="mx-auto flex max-w-7xl items-center gap-5 px-6 py-3 text-sm">
        <!-- Brand -->
        <a href="/" class="group flex items-center gap-2 font-semibold">
          <span class="inline-block h-6 w-6 rounded-md bg-gradient-to-br from-indigo-500 via-fuchsia-500 to-rose-500"></span>
          <span>The Invincibles</span>
        </a>

        <!-- Links -->
        <a href="/" class="hover:text-indigo-600">Overview</a>
        <a href="/design" class="hover:text-indigo-600">Design</a>
        <a href="/implementation" class="hover:text-indigo-600">Implementation</a>
        <a href="/testing" class="hover:text-indigo-600">Testing</a>
        <a href="/deployment" class="hover:text-indigo-600">Deployment</a>
        <a href="/projectmanage" class="hover:text-indigo-600">Project Management</a>
        <a href="/methodology" class="hover:text-indigo-600">Git Methodology</a>
        <a href="/techstack" class="hover:text-indigo-600">Tech Stack</a>
        <a href="/reflection" class="hover:text-indigo-600">Reflection</a>

        <!-- Right side -->
        <div class="ml-auto flex items-center gap-3">
          <a
            href="https://github.com/Stephan0709/TheInvinciblesProjects"
            target="_blank"
            rel="noreferrer"
            class="rounded-lg border border-slate-200 px-3 py-1.5 text-xs hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800"
          >GitHub</a>

          <button
            id="theme-toggle"
            class="rounded-lg border border-slate-200 px-3 py-1.5 text-xs hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800"
          >Toggle theme</button>
        </div>
      </nav>
    </header>

    <!-- Main content (Option A): wide container with default typography -->
    <!-- Pages can opt out of typography with `not-prose` where needed -->
    <main id="content" class="mx-auto max-w-7xl px-6 py-10 prose prose-slate prose-a:text-indigo-600 hover:prose-a:underline dark:prose-invert">
      <slot />
    </main>

    <!-- Footer -->
    <footer class="mx-auto max-w-7xl px-6 py-10 text-xs text-slate-500">
      <div class="flex items-center justify-between">
        <p>© {new Date().getFullYear()} The Invincibles Project</p>
        <p class="opacity-80">Built with Astro + Tailwind</p>
      </div>
    </footer>

    <!-- Theme toggle (persist preference) -->
    <script>
      const root = document.documentElement;
      const btn = document.getElementById('theme-toggle');

      try {
        const saved = localStorage.getItem('theme');
        if (saved === 'dark') root.classList.add('dark');
        if (saved === 'light') root.classList.remove('dark');
      } catch (_) {}

      btn?.addEventListener('click', () => {
        const isDark = root.classList.toggle('dark');
        try { localStorage.setItem('theme', isDark ? 'dark' : 'light'); } catch (_) {}
      });
    </script>
  </body>
</html>
